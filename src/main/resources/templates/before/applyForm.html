<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>贷款申请表</title>
    <!--先引入vue.js库-->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!--axios-->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <style>
        .avatar-uploader .el-upload {
            border: 1px dashed #d9d9d9;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .avatar-uploader .el-upload:hover {
            border-color: #409EFF;
        }
        .avatar-uploader-icon {
            font-size: 28px;
            color: #8c939d;
            width: 178px;
            height: 178px;
            line-height: 178px;
            text-align: center;
        }
        .avatar {
            width: 178px;
            height: 178px;
            display: block;
        }
        #app{
            width:800px;
            height: 100%;
            margin: 0 auto;
            text-align: center;
            border: 1px black solid;
        }

        #sex{
            text-align: left;
        }

    </style>
</head>
<body>
<div id="app">
    <div>
        <h2>贷款申请表</h2>
    </div>
    <el-form :inline="true" :model="form" label-width="150px" class="demo-form-inline" :label-position="left">
        <!--隐藏主键-->
        <el-input v-model="form.applyId" type="hidden" autocomplete="off"></el-input>
        <el-input v-model="form.userId" type="hidden" autocomplete="off"></el-input>
        <el-row :gutter="20">
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="贷款类型">
                        <el-select v-model="form.loanType" placeholder="请选择贷款方式">
                            <el-option label="信用贷" value="1"></el-option>
                            <el-option label="抵押贷" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </div>
            </el-col>
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="贷款金额">
                        <el-input v-model="form.loanMoney" placeholder="贷款金额" autocomplete="off"></el-input>
                    </el-form-item>
                </div>
            </el-col>
        </el-row>
        <el-row :gutter="20">
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="贷款期限">
                        <el-select v-model="form.loanDeadline" placeholder="请选择贷款期限">
                            <el-option label="6个月" value="6"></el-option>
                            <el-option label="7个月" value="7"></el-option>
                            <el-option label="8个月" value="8"></el-option>
                            <el-option label="9个月" value="9"></el-option>
                            <el-option label="10个月" value="10"></el-option>
                            <el-option label="11个月" value="11"></el-option>
                            <el-option label="12个月" value="12"></el-option>
                        </el-select>
                    </el-form-item>
                </div>
            </el-col>
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="担保人姓名">
                        <el-input v-model="form.bondsmanName" placeholder="担保人姓名" autocomplete="off"></el-input>
                    </el-form-item>
                </div>
            </el-col>
        </el-row>
        <el-row :gutter="20">
                <el-col :span="12">
                    <div class="grid-content bg-purple">
                        <el-form-item label="担保人年龄">
                            <el-input v-model="form.bondsmanAge" placeholder="担保人年龄" autocomplete="off"></el-input>
                        </el-form-item>
                    </div>
                </el-col>
                <el-col :span="12">
                    <div class="grid-content bg-purple" id="sex">
                        <el-form-item label="担保人性别">
                            <template>
                                <el-radio v-model="form.bondsmanSex" label="男">男</el-radio>&nbsp;&nbsp;
                                <el-radio v-model="form.bondsmanSex" label="女">女</el-radio>
                            </template>
                        </el-form-item>
                    </div>
                </el-col>
        </el-row>
        <el-row :gutter="20">
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="担保人电话">
                        <el-input v-model="form.bondsmanTel" placeholder="担保人电话" autocomplete="off"></el-input>
                    </el-form-item>
                </div>
            </el-col>
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="担保人身份证号">
                        <el-input v-model="form.bondsmanZj" placeholder="担保人身份证号" autocomplete="off"></el-input>
                    </el-form-item>
                </div>
            </el-col>
        </el-row>
        <el-row :gutter="20">
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="身份证正面" >
                        <el-upload
                                name="bondsmanSfzz"
                                class="avatar-uploader"
                                action="/demo/apply/uploadSfzz"
                                :show-file-list="false"
                                :on-success="handleAvatarSuccess"
                                :before-upload="beforeAvatarUpload">
                            <img v-if="imageUrl" :src="imageUrl" class="avatar">
                            <i v-else class="el-icon-plus avatar-uploader-icon"></i>
                        </el-upload>
                    </el-form-item>
                </div>
            </el-col>
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="身份证反面" >
                        <el-upload
                                name="bondsmanSfzf"
                                class="avatar-uploader"
                                action="/demo/apply/uploadSfzf"
                                :show-file-list="false"
                                :on-success="handleAvatarSuccess1"
                                :before-upload="beforeAvatarUpload">
                            <img v-if="imageUrl1" :src="imageUrl1" class="avatar">
                            <i v-else class="el-icon-plus avatar-uploader-icon"></i>
                        </el-upload>
                    </el-form-item>
                </div>
            </el-col>
        </el-row>
        <el-row :gutter="20">
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="担保人家庭住址">
                        <el-input v-model="form.bondsmanAdd" placeholder="担保人家庭住址" autocomplete="off"></el-input>
                    </el-form-item>
                </div>
            </el-col>
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="担保人年收入">
                        <el-input v-model="form.income" placeholder="担保人年收入,单位：万元" autocomplete="off"></el-input>
                    </el-form-item>
                </div>
            </el-col>
        </el-row>
        <el-row :gutter="20">
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="还款方式">
                        <el-select v-model="form.repaymentId" placeholder="请选择还款方式">
                            <el-option label="到期一次付清" value="1"></el-option>
                            <el-option label="按月分期" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </div>
            </el-col>
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="还款类型">
                        <el-select v-model="form.repaymentType" placeholder="请选择还款类型">
                            <el-option label="等额本金" value="1"></el-option>
                            <el-option label="等额本息" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </div>
            </el-col>
        </el-row>
        <el-row :gutter="20">
            <el-col :span="12">
                <div class="grid-content bg-purple">
                    <el-form-item label="贷款描述" >
                        <el-input v-model="form.describes" placeholder="贷款描述" autocomplete="off"></el-input>
                    </el-form-item>
                </div>
            </el-col>
            <el-col :span="12">
                <div class="grid-content bg-purple">

                </div>
            </el-col>
        </el-row>
    </el-form>
    <div id="footer" slot="footer" class="dialog-footer">
        <el-button id="close" type="danger" @click="dialogFormVisible = false">取 消</el-button>
        <el-button id="sure" type="primary" @click="next">下一步</el-button>
    </div>
</div>

<script>
    var vue=new Vue({
        el:"#app",
        data:{
            form:{
                userId:'1',
                loanType:'',
                loanMoney:'',
                loanDeadline:'',
                repaymentId:'',
                repaymentType:'',
                bondsmanName:'',
                bondsmanAge:'',
                bondsmanSex:'',
                bondsmanTel:'',
                bondsmanZj:'',
                bondsmanSfzz:'',
                bondsmanSfzf:'',
                bondsmanAdd:'',
                income:'',
                describes:'',
                loanStatus:'1'
            },
            formLabelWidth:'300px',
            url:'',
            imageUrl:'',
            imageUrl1:''
        },
        methods:{
            next:function () {
                var self=this;
                this.url="/demo/apply/save";
                axios.post(this.url,this.form)
                    .then(function (response) {
                        //添加或者修改成功
                        if(response.data==1){
                            self.$message({
                                message:'恭喜你，操作成功！',
                                type:'success'
                            });
                        }else{
                            //添加或者修改错误
                            self.$message.error('错了哦，操作错误');
                        }
                    });
            },
            handleAvatarSuccess:function(res, file) {
                this.imageUrl = URL.createObjectURL(file.raw);
                this.form.bondsmanSfzz =file.response.newFileName;
            },
            handleAvatarSuccess1:function(res, file) {
                this.imageUrl1 = URL.createObjectURL(file.raw);
                this.form.bondsmanSfzf =file.response.newFileName;
            },
            beforeAvatarUpload:function(file) {
                var isJPG = file.type === 'image/jpeg';
                var isLt2M = file.size / 1024 / 1024 < 2;

                if (!isJPG) {
                    this.$message.error('上传头像图片只能是 JPG 格式!');
                }
                if (!isLt2M) {
                    this.$message.error('上传头像图片大小不能超过 2MB!');
                }
                return isJPG && isLt2M;
            }
        }
    });
</script>
</body>
</html>